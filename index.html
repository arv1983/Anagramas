<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script type="text/javascript" src="anagrams1/anagrams.js"></script>
  </head>

  <body>
    <div>
      <input type="text" id="input" size="40" value="ryan agard" />
      <button id="findButton">Encontrar Anagramas</button>
    </div>

    <div id="res"></div>

    <script>
      const button = document.getElementById("findButton");
      button.onclick = function () {
        nome = document
          .getElementById("input")
          .value.toLowerCase()
          .trim()
          .replace(" ", "");

        let palavraDoDicionario;
        let resultado = [];
        let input = qtdLetras(nome).sort().join("");
        let possivel;
        let comparar;

        for (let i = 0; i < palavras.length; i++) {
          possivel = qtdLetras(palavras[i]).sort().join("");
          for (let a = 0; a <= possivel.length; a += 2) {
            if (
              input.indexOf(possivel[a]) >= 0 &&
              possivel[a + 1] <= input[input.indexOf(possivel[a]) + 1]
            ) {
              if (a + 2 == possivel.length) {
                resultado.push(palavras[i]);
              }
            } else {
              break;
            }
          }
        }
        juntar_palavras(resultado);
        function juntar_palavras(palavras_a_juntar) {
          let tres_palavras = [];

          for (let a = 0; a < palavras_a_juntar.length; a++) {
            for (let b = 0; b < palavras_a_juntar.length; b++) {
              for (let c = 0; c < palavras_a_juntar.length; c++) {
                if (a != b && a != c && b != c) {
                  comparar =
                    palavras_a_juntar[a] +
                    palavras_a_juntar[b] +
                    palavras_a_juntar[c];
                  if (comparar.length == nome.length) {
                    if (
                      comparar.split("").sort().join("") ==
                      nome.split("").sort().join("")
                    ) {
                      tres_palavras.push([
                        palavras_a_juntar[a],
                        palavras_a_juntar[b],
                        palavras_a_juntar[c],
                      ]);
                    }
                  }
                }
              }
            }
          }
          for (let d = 0; d < tres_palavras.length; d++) {
            tres_palavras[d] = tres_palavras[d].sort();
          }
          tres_palavras = tres_palavras.sort();

          let final = Array.from(
            new Set(tres_palavras.map((subarr) => subarr.join(" ")))
          );

          document.getElementById("res").innerHTML +=
            "Foi encontrado " +
            final.length +
            " anagramas de duas palavras: <br>";

          for (let i = 0; i < final.length; i++) {
            document.getElementById("res").innerHTML += final[i] + "<br>";
          }
        }

        function qtdLetras(nome) {
          let busca = [];
          for (let i = 0; i < nome.length; i++) {
            busca.push(nome[i].concat(nome.split(nome[i]).length - 1));
          }

          let totalLetras = busca.filter(function (item) {
            return busca.hasOwnProperty(item) ? false : (busca[item] = true);
          });

          return totalLetras;
        }
      };
    </script>
  </body>
</html>
